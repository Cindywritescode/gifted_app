<div class="container p-3 m-auto">


<h1>Your Gifts</h1>
<div>
<h4>Unassigned Gifts</h4>
  <% @gifts.each do |gift| %>
      <% if gift.gift_ideas == [] %>
      <ul>
        <li>
          <%= gift.product_name.nil? ? gift.gift_url : gift.product_name %>
          <% if gift.photo.nil? %>
            <%= image_tag "logo/grayscale.png", height: 200, crop: :fill %>
          <% else %>
            <%= image_tag gift.photo, height: 200, crop: :fill %>
          <% end %>

          <%= link_to "Assign to Friend", new_gift_gift_idea_path(gift) %>
          <%=link_to "Delete", gift_path(gift), method: :delete, data: { confirm: "Are you sure?" } %>
        </li>
      </ul>
      <% end %>
  <% end %>
  <%= link_to 'Add a new gift', new_gift_path %>
</div>


<div>
<h4>Gift Ideas</h4>

<% @gifts.each do |gift| %>
  <% if gift.gift_ideas != [] %>
    <ul>
      <li>

       <%= gift.product_name.nil? ? gift.gift_url : gift.product_name %>
        <% if gift.photo.nil? %>
          <%= image_tag "logo/grayscale.png", height: 200, crop: :fill %>
        <% else %>
          <%= gift.photo %>
        <% end %>

        <% gift.gift_ideas.each do |idea| %>
        <% if Friend.find(idea.friend_id).photo.attached? %>
        <%= cl_image_tag Friend.find(idea.friend_id).photo.key, height: 40, width: 40, gravity: :face, radius: :max, crop: :fill %>
        <% end %>
        <%= link_to Friend.find(idea.friend_id).name, friend_path(idea.friend_id) %>
        <%=link_to "Delete", gift_gift_idea_path(id: idea.id, gift_id: gift.id), method: :delete, data: { confirm: "Are you sure?" } %>
        <% end %>
      </li>
    </ul>
  <% end %>
<% end %>
</div>



</div>

